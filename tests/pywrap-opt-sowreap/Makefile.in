SRCDIR = @srcdir@

include ../MakeVars

$(PASSFILE):
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl $(SRCDIR)/input.dat $(TARGET) $(PSIAUTOTEST)
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-1-1.in $(TARGET) $(PSIAUTOTEST) OPT-1-1.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-1-2.in $(TARGET) $(PSIAUTOTEST) OPT-1-2.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-1-3.in $(TARGET) $(PSIAUTOTEST) OPT-1-3.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-1-4.in $(TARGET) $(PSIAUTOTEST) OPT-1-4.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-1-5.in $(TARGET) $(PSIAUTOTEST) OPT-1-5.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-master.in $(TARGET) $(PSIAUTOTEST) OPT-master.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-2-1.in $(TARGET) $(PSIAUTOTEST) OPT-2-1.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-2-2.in $(TARGET) $(PSIAUTOTEST) OPT-2-2.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-2-3.in $(TARGET) $(PSIAUTOTEST) OPT-2-3.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-2-4.in $(TARGET) $(PSIAUTOTEST) OPT-2-4.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-2-5.in $(TARGET) $(PSIAUTOTEST) OPT-2-5.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-master.in $(TARGET) $(PSIAUTOTEST) OPT-master.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-3-1.in $(TARGET) $(PSIAUTOTEST) OPT-3-1.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-3-2.in $(TARGET) $(PSIAUTOTEST) OPT-3-2.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-3-3.in $(TARGET) $(PSIAUTOTEST) OPT-3-3.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-3-4.in $(TARGET) $(PSIAUTOTEST) OPT-3-4.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-3-5.in $(TARGET) $(PSIAUTOTEST) OPT-3-5.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-master.in $(TARGET) $(PSIAUTOTEST) OPT-master.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-4-1.in $(TARGET) $(PSIAUTOTEST) OPT-4-1.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-4-2.in $(TARGET) $(PSIAUTOTEST) OPT-4-2.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-4-3.in $(TARGET) $(PSIAUTOTEST) OPT-4-3.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-4-4.in $(TARGET) $(PSIAUTOTEST) OPT-4-4.out
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-4-5.in $(TARGET) $(PSIAUTOTEST) OPT-4-5.out
	/bin/cat $(SRCDIR)/tests >> OPT-master.in
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) $(PERL) ../runtest.pl OPT-master.in $(TARGET) $(PSIAUTOTEST) OPT-master.out
	mv $(TARGET) $(PASSFILE)

clean:
	@SRCDIR=$(SRCDIR) PSIDATADIR=$(SRC_PSIDATADIR) 
	/bin/rm -f $(TARGET) $(PASSFILE) $(GARBAGE) OPT-*

